<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Announcements - CampusLink</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(45deg, #fff, #a8d8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255,255,255,0.1);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-profile:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Main Content */
        .main-content {
            margin-top: 80px;
            padding: 2rem 0;
            min-height: calc(100vh - 80px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Page Header */
        .page-header {
            text-align: center;
            margin-bottom: 3rem;
            background: white;
            padding: 3rem 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .page-header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .page-header p {
            font-size: 1.1rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Controls Section */
        .controls-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .filters {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-select, .search-input {
            padding: 0.75rem 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            background: white;
        }

        .filter-select:focus, .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-input {
            padding-left: 3rem;
            width: 300px;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            color: #666;
            font-size: 1.1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102,126,234,0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102,126,234,0.4);
        }

        .btn-outline {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-outline:hover {
            background: #667eea;
            color: white;
        }

        /* Announcements Grid */
        .announcements-grid {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .announcement-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
            border-left: 4px solid transparent;
        }

        .announcement-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .announcement-card.pinned {
            border-left-color: #ff6b6b;
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
        }

        .announcement-card.event {
            border-left-color: #4ecdc4;
        }

        .announcement-card.exam {
            border-left-color: #ffe66d;
        }

        .announcement-card.holiday {
            border-left-color: #a8e6cf;
        }

        .announcement-card.notice {
            border-left-color: #667eea;
        }

        .announcement-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .announcement-meta {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .announcement-category {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .category-event {
            background: #e8fffe;
            color: #4ecdc4;
        }

        .category-exam {
            background: #fff9e6;
            color: #f39c12;
        }

        .category-holiday {
            background: #f0f9f0;
            color: #27ae60;
        }

        .category-notice {
            background: #f0f4ff;
            color: #667eea;
        }

        .announcement-date {
            font-size: 0.9rem;
            color: #666;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .announcement-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .pin-badge {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .announcement-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.75rem;
            line-height: 1.3;
        }

        .announcement-content {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .announcement-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid #f0f0f0;
        }

        .engagement {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .engagement-btn {
            background: none;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .engagement-btn:hover {
            color: #667eea;
        }

        .engagement-btn.active {
            color: #667eea;
        }

        .author-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #666;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.3rem;
        }

        .close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close:hover {
            background: rgba(255,255,255,0.1);
        }

        .modal-body {
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }

        textarea.form-control {
            resize: vertical;
            min-height: 120px;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .page-btn {
            padding: 0.75rem 1rem;
            border: 2px solid #e1e8ed;
            background: white;
            color: #666;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .page-btn:hover, .page-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .controls-section {
                flex-direction: column;
                align-items: stretch;
            }

            .filters {
                justify-content: center;
            }

            .search-input {
                width: 100%;
                max-width: 300px;
            }

            .announcement-header {
                flex-direction: column;
                gap: 1rem;
            }

            .announcement-actions {
                align-self: flex-start;
            }

            .announcement-footer {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
            }

            .modal-body {
                padding: 1.5rem;
            }
        }

        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 3rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <a href="#" class="logo">CampusLink</a>
            <div class="nav-links">
                <a href="finalmain.html" class="nav-link">🏠 Home</a>
                <a href="#" class="nav-link">📅 Timetable</a>
                <a href="skillpage.html" class="nav-link">🤝 Skills</a>
                <a href="#" class="nav-link">🔍 Lost & Found</a>
                <div class="user-profile" onclick="toggleUserMenu()">
                    <span>👤</span>
                    <span id="userRole">Admin</span>
                    <span>▼</span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <section class="page-header">
                <h1>📢 Stay Informed. Instantly.</h1>
                <p>Your central hub for all campus announcements, events, and important updates. Never miss what matters most to your academic journey.</p>
            </section>

            <!-- Controls Section -->
            <section class="controls-section">
                <div class="filters">
                    <div class="filter-group">
                        <label for="categoryFilter">Category:</label>
                        <select id="categoryFilter" class="filter-select" onchange="filterAnnouncements()">
                            <option value="all">All Categories</option>
                            <option value="event">Events</option>
                            <option value="exam">Exams</option>
                            <option value="holiday">Holidays</option>
                            <option value="notice">Notices</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="dateFilter">Date:</label>
                        <select id="dateFilter" class="filter-select" onchange="filterAnnouncements()">
                            <option value="all">All Time</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                        </select>
                    </div>
                    <div class="search-container">
                        <span class="search-icon">🔍</span>
                        <input type="text" id="searchInput" class="search-input" placeholder="Search announcements..." oninput="searchAnnouncements()">
                    </div>
                </div>
                <div class="admin-actions" id="adminActions">
                    <button class="btn btn-primary" onclick="openNewAnnouncementModal()">
                        ➕ New Announcement
                    </button>
                    <button class="btn btn-outline" onclick="toggleArchive()">
                        📁 Archive
                    </button>
                </div>
            </section>

            <!-- Loading State -->
            <div class="loading" id="loadingState" style="display: none;">
                <div class="spinner"></div>
            </div>

            <!-- Announcements Grid -->
            <section class="announcements-grid" id="announcementsGrid">
                <!-- Announcements will be loaded here -->
            </section>

            <!-- Pagination -->
            <nav class="pagination" id="pagination">
                <a href="#" class="page-btn" onclick="changePage(1)">‹‹</a>
                <a href="#" class="page-btn" onclick="changePage(-1)">‹</a>
                <a href="#" class="page-btn active">1</a>
                <a href="#" class="page-btn">2</a>
                <a href="#" class="page-btn">3</a>
                <a href="#" class="page-btn" onclick="changePage(1)">›</a>
                <a href="#" class="page-btn" onclick="changePage(5)">››</a>
            </nav>
        </div>
    </main>

    <!-- New Announcement Modal -->
    <div id="newAnnouncementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>📝 Create New Announcement</h2>
                <button class="close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newAnnouncementForm">
                    <div class="form-group">
                        <label for="announcementTitle">Title *</label>
                        <input type="text" id="announcementTitle" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="announcementCategory">Category *</label>
                        <select id="announcementCategory" class="form-control" required>
                            <option value="">Select Category</option>
                            <option value="event">Event</option>
                            <option value="exam">Exam</option>
                            <option value="holiday">Holiday</option>
                            <option value="notice">Notice</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="announcementContent">Content *</label>
                        <textarea id="announcementContent" class="form-control" required placeholder="Write your announcement here..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="scheduleDate">Schedule for Later (Optional)</label>
                        <input type="datetime-local" id="scheduleDate" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="pinAnnouncement"> Pin to Top
                        </label>
                    </div>
                    <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
                        <button type="button" class="btn btn-outline" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">📤 Publish</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Sample announcements data
        let announcements = [
            {
                id: 1,
                title: "Mid-Semester Examinations Schedule Released",
                category: "exam",
                content: "The mid-semester examination schedule for all departments has been released. Please check your department notice boards and student portals for detailed timings. Exam hall allocations will be announced 48 hours before each exam.",
                author: "Academic Office",
                date: "2025-07-26T10:30:00",
                pinned: true,
                likes: 45,
                comments: 12,
                shares: 8
            },
            {
                id: 2,
                title: "Cultural Fest 2025 - Call for Participation",
                category: "event",
                content: "Get ready for the biggest cultural extravaganza of the year! Registration is now open for all events including music, dance, drama, and literary competitions. Early bird registrations get special perks.",
                author: "Cultural Committee",
                date: "2025-07-25T14:15:00",
                pinned: false,
                likes: 128,
                comments: 34,
                shares: 56
            },
            {
                id: 3,
                title: "Republic Day Holiday",
                category: "holiday",
                content: "The college will remain closed on January 26th, 2025 (Republic Day). All classes and administrative work will resume on January 27th, 2025. Have a great day celebrating our nation!",
                author: "Administration",
                date: "2025-07-24T09:00:00",
                pinned: false,
                likes: 67,
                comments: 5,
                shares: 23
            },
            {
                id: 4,
                title: "New Library Timing and Digital Resources",
                category: "notice",
                content: "Starting next week, the library will be open 24/7 for final year students. New digital resources have been added including IEEE Xplore and ACM Digital Library. Training sessions will be conducted next week.",
                author: "Library Services",
                date: "2025-07-23T16:45:00",
                pinned: false,
                likes: 89,
                comments: 18,
                shares: 31
            },
            {
                id: 5,
                title: "Workshop on AI and Machine Learning",
                category: "event",
                content: "Join us for an intensive 3-day workshop on Artificial Intelligence and Machine Learning. Industry experts will cover practical applications and hands-on projects. Limited seats available - register now!",
                author: "Computer Science Dept",
                date: "2025-07-22T11:20:00",
                pinned: false,
                likes: 156,
                comments: 42,
                shares: 78
            }
        ];

        let currentPage = 1;
        let announcementsPerPage = 5;
        let filteredAnnouncements = [...announcements];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            renderAnnouncements();
            setupAnimations();
        });

        // Render announcements
        function renderAnnouncements() {
            const grid = document.getElementById('announcementsGrid');
            const startIndex = (currentPage - 1) * announcementsPerPage;
            const endIndex = startIndex + announcementsPerPage;
            const currentAnnouncements = filteredAnnouncements.slice(startIndex, endIndex);

            if (currentAnnouncements.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: #666;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">📭</div>
                        <h3>No announcements found</h3>
                        <p>Try adjusting your filters or search terms.</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = currentAnnouncements.map(announcement => `
                <div class="announcement-card ${announcement.category} ${announcement.pinned ? 'pinned' : ''} fade-in">
                    <div class="announcement-header">
                        <div class="announcement-meta">
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <span class="announcement-category category-${announcement.category}">
                                    ${getCategoryIcon(announcement.category)} ${announcement.category}
                                </span>
                                ${announcement.pinned ? '<span class="pin-badge">📌 Pinned</span>' : ''}
                            </div>
                            <div class="announcement-date">
                                🕒 ${formatDate(announcement.date)}
                            </div>
                        </div>
                        <div class="announcement-actions">
                            <button class="engagement-btn" onclick="toggleBookmark(${announcement.id})">
                                🔖
                            </button>
                            <button class="engagement-btn" onclick="shareAnnouncement(${announcement.id})">
                                📤
                            </button>
                        </div>
                    </div>
                    <h3 class="announcement-title">${announcement.title}</h3>
                    <div class="announcement-content">${announcement.content}</div>
                    <div class="announcement-footer">
                        <div class="engagement">
                            <button class="engagement-btn" onclick="toggleLike(${announcement.id})">
                                ❤️ <span id="likes-${announcement.id}">${announcement.likes}</span>
                            </button>
                            <button class="engagement-btn" onclick="openComments(${announcement.id})">
                                💬 ${announcement.comments}
                            </button>
                            <button class="engagement-btn" onclick="shareAnnouncement(${announcement.id})">
                                🔄 ${announcement.shares}
                            </button>
                        </div>
                        <div class="author-info">
                            👤 ${announcement.author}
                        </div>
                    </div>
                </div>
            `).join('');

            // Trigger animations
            setTimeout(() => {
                document.querySelectorAll('.fade-in').forEach(el => {
                    el.classList.add('visible');
                });
            }, 100);
        }

        // Utility functions
        function getCategoryIcon(category) {
            const icons = {
                event: '🎉',
                exam: '📝',
                holiday: '🏖️',
                notice: '📋'
            };
            return icons[category] || '📢';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            if (diffDays === 1) return 'Today';
            if (diffDays === 2) return 'Yesterday';
            if (diffDays <= 7) return `${diffDays} days ago`;
            
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // Filter functions
        function filterAnnouncements() {
            const categoryFilter = document.getElementById('categoryFilter').value;
            const dateFilter = document.getElementById('dateFilter').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            filteredAnnouncements = announcements.filter(announcement => {
                const matchesCategory = categoryFilter === 'all' || announcement.category === categoryFilter;
                const matchesSearch = announcement.title.toLowerCase().includes(searchTerm) || 
                                    announcement.content.toLowerCase().includes(searchTerm);
                
                let matchesDate = true;
                if (dateFilter !== 'all') {
                    const announcementDate = new Date(announcement.date);
                    const now = new Date();
                    const diffTime = now - announcementDate;
                    const diffDays = diffTime / (1000 * 60 * 60 * 24);

                    switch(dateFilter) {
                        case 'today':
                            matchesDate = diffDays < 1;
                            break;
                        case 'week':
                            matchesDate = diffDays < 7;
                            break;
                        case 'month':
                            matchesDate = diffDays < 30;
                            break;
                    }
                }

                return matchesCategory && matchesSearch && matchesDate;
            });

            currentPage = 1;
            renderAnnouncements();
            updatePagination();
        }

        function searchAnnouncements() {
            filterAnnouncements();
        }

        // Modal functions
        function openNewAnnouncementModal() {
            document.getElementById('newAnnouncementModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('newAnnouncementModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('newAnnouncementForm').reset();
        }

        // Form submission
        document.getElementById('newAnnouncementForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('announcementTitle').value;
            const category = document.getElementById('announcementCategory').value;
            const content = document.getElementById('announcementContent').value;
            const scheduleDate = document.getElementById('scheduleDate').value;
            const pinned = document.getElementById('pinAnnouncement').checked;

            const newAnnouncement = {
                id: announcements.length + 1,
                title: title,
                category: category,
                content: content,
                author: "Admin",
                date: scheduleDate || new Date().toISOString(),
                pinned: pinned,
                likes: 0,
                comments: 0,
                shares: 0
            };

            announcements.unshift(newAnnouncement);
            filteredAnnouncements = [...announcements];
            renderAnnouncements();
            closeModal();
            
            // Show success message
            showNotification('✅ Announcement published successfully!', 'success');
        });

        // Interaction functions
        function toggleLike(id) {
            const announcement = announcements.find(a => a.id === id);
            if (announcement) {
                announcement.likes += 1;
                document.getElementById(`likes-${id}`).textContent = announcement.likes;
                
                // Add animation
                const likeBtn = event.target.closest('.engagement-btn');
                likeBtn.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    likeBtn.style.transform = 'scale(1)';
                }, 200);
            }
        }

        function toggleBookmark(id) {
            showNotification('🔖 Announcement bookmarked!', 'info');
        }

        function shareAnnouncement(id) {
            const announcement = announcements.find(a => a.id === id);
            if (announcement) {
                announcement.shares += 1;
                renderAnnouncements();
                showNotification('📤 Announcement shared!', 'info');
            }
        }

        function openComments(id) {
            showNotification('💬 Comments feature coming soon!', 'info');
        }

        // Pagination
        function changePage(direction) {
            const totalPages = Math.ceil(filteredAnnouncements.length / announcementsPerPage);
            
            if (typeof direction === 'number') {
                if (direction > 0) {
                    currentPage = Math.min(currentPage + 1, totalPages);
                } else {
                    currentPage = Math.max(currentPage - 1, 1);
                }
            }
            
            renderAnnouncements();
            updatePagination();
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredAnnouncements.length / announcementsPerPage);
            const pagination = document.getElementById('pagination');
            
            let paginationHTML = '';
            
            // Previous buttons
            paginationHTML += `<a href="#" class="page-btn ${currentPage === 1 ? 'disabled' : ''}" onclick="currentPage = 1; renderAnnouncements(); updatePagination();">‹‹</a>`;
            paginationHTML += `<a href="#" class="page-btn ${currentPage === 1 ? 'disabled' : ''}" onclick="changePage(-1)">‹</a>`;
            
            // Page numbers
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, currentPage + 2);
            
            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `<a href="#" class="page-btn ${i === currentPage ? 'active' : ''}" onclick="currentPage = ${i}; renderAnnouncements(); updatePagination();">${i}</a>`;
            }
            
            // Next buttons
            paginationHTML += `<a href="#" class="page-btn ${currentPage === totalPages ? 'disabled' : ''}" onclick="changePage(1)">›</a>`;
            paginationHTML += `<a href="#" class="page-btn ${currentPage === totalPages ? 'disabled' : ''}" onclick="currentPage = ${totalPages}; renderAnnouncements(); updatePagination();">››</a>`;
            
            pagination.innerHTML = paginationHTML;
        }

        // User menu toggle
        function toggleUserMenu() {
            // Toggle between Admin and Student view
            const userRole = document.getElementById('userRole');
            const adminActions = document.getElementById('adminActions');
            
            if (userRole.textContent === 'Admin') {
                userRole.textContent = 'Student';
                adminActions.style.display = 'none';
            } else {
                userRole.textContent = 'Admin';
                adminActions.style.display = 'flex';
            }
        }

        // Archive toggle
        function toggleArchive() {
            showNotification('📁 Archive feature coming soon!', 'info');
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                z-index: 3000;
                animation: slideInRight 0.3s ease-out;
                max-width: 300px;
                font-size: 0.9rem;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in forwards';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Animation setup
        function setupAnimations() {
            // Add CSS for notification animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from {
                        opacity: 0;
                        transform: translateX(100px);
                    }
                    to {
                        opacity: 1;
                        transform: translateX(0);
                    }
                }
                
                @keyframes slideOutRight {
                    from {
                        opacity: 1;
                        transform: translateX(0);
                    }
                    to {
                        opacity: 0;
                        transform: translateX(100px);
                    }
                }
                
                .page-btn.disabled {
                    opacity: 0.5;
                    pointer-events: none;
                }
            `;
            document.head.appendChild(style);
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('newAnnouncementModal');
            if (event.target === modal) {
                closeModal();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });

        // Auto-refresh announcements (simulate real-time updates)
        setInterval(() => {
            // In a real application, this would fetch new announcements from the server
            const hasNewAnnouncements = Math.random() < 0.1; // 10% chance
            
            if (hasNewAnnouncements) {
                const newNotificationBadge = document.createElement('div');
                newNotificationBadge.style.cssText = `
                    position: fixed;
                    top: 80px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: linear-gradient(45deg, #ff6b6b, #ee5a24);
                    color: white;
                    padding: 0.5rem 1rem;
                    border-radius: 25px;
                    font-size: 0.9rem;
                    z-index: 2000;
                    animation: pulse 2s infinite;
                    cursor: pointer;
                    box-shadow: 0 4px 20px rgba(255,107,107,0.4);
                `;
                newNotificationBadge.textContent = '🔔 New announcements available';
                newNotificationBadge.onclick = () => {
                    location.reload();
                };
                
                document.body.appendChild(newNotificationBadge);
                
                setTimeout(() => {
                    if (document.body.contains(newNotificationBadge)) {
                        document.body.removeChild(newNotificationBadge);
                    }
                }, 5000);
            }
        }, 30000); // Check every 30 seconds

        // Initialize page with animations
        updatePagination();
    </script>
</body>
</html>